#! /bin/bash
# date command: MACOS

userdir=$HOME
current_dir=$userdir/bin/

# Clear current weeks
weeks=$current_dir/weeks
true > $weeks

# Set the prompt for the select command
PS3="Select a date or 'q' to quit: "

# Give me the next five weeks starting on Sunday
sundays=( -7 +0 +7 +14 +21 +28 +35 )
for i in "${sundays[@]}"; do
  echo "$(date -j -v+sun -v"$i"d +%F)" >> $current_dir/weeks
done

next5weeks=$(cat $weeks)

# Show a menu and ask for input.
select workingSunday in $next5weeks; do
    if [ -n "$workingSunday" ]; then
        echo ${workingSunday}
    fi
    break
done

# set your dates for each post
date_mon=`date -j -f %Y-%m-%d -v+1d $workingSunday +%F`
date_tue=`date -j -f %Y-%m-%d -v+2d $workingSunday +%F`
date_wed=`date -j -f %Y-%m-%d -v+3d $workingSunday +%F`
date_thu=`date -j -f %Y-%m-%d -v+4d $workingSunday +%F`
date_fri=`date -j -f %Y-%m-%d -v+5d $workingSunday +%F`
date_sat=`date -j -f %Y-%m-%d -v+6d $workingSunday +%F`
# date_mark=`date -j -f %Y-%m-%d -v+5d $workingSunday +%F`

# Working directories for posts
content_dir=$userdir/Sites/theologic.us/content/posts

# Working basenames for posts
base_mon=commentary-romans
base_tue=now-sings-my-soul-psalms
base_wed=a-life-of-compromise
base_thu=family-devos-luke
base_fri=few-points-friday
base_tim=letters-to-timothy
base_sat=sundry-saturday
# base_mark=commentary-mark

# Working dirnames
dir_mon=1-commentary-romans
dir_tue=2-now-sings-my-soul-psalm
dir_wed=3-memoir-a-life-of-compromise
dir_thu=4-family-devos-luke
dir_fri=5-few-points-friday
dir_tim=5-letters-to-timothy
dir_sat=6-sundry-saturday
# base_fri=commentary-mark

echo "Publishing for the week of" $workingSunday"!"

read -p "Are you sure? " -n 1 -r
echo
if [[ $REPLY =~ ^[Yy]$ ]]
then
    cat << EOF > "$content_dir"/"$dir_mon"/x-"$date_mon"-"$base_mon".md
---
title: 'Romans'
author: Joseph Louthan
type: post
publishDate: $date_mon
url: /$base_mon/$date_mon-$base_mon/
categories:
  - Commentary
tags:
  - 'Commentary: Romans'
draft: true
---
EOF
    cat << EOF > "$content_dir"/"$dir_tue"/x-"$date_tue"-"$base_tue".md
---
title: 'Now Sings My Soul'
author: Joseph Louthan
type: post
publishDate: $date_tue
url: /$base_tue/$date_tue-$base_tue/
categories:
  - Prayers
tags:
  - 'Now Sings My Soul: Psalms'
draft: true
---
<pre>
<div style="font-variant: small-caps;"></div>

</pre>
EOF
    cat << EOF > $content_dir/"$dir_wed"/x-"$date_wed"-"$base_wed".md
---
title: 'A Life of Compromise'
author: Joseph Louthan
type: post
publishDate: $date_wed
url: /memoir/$date_wed-$base_wed/
categories:
  - Memoir
tags:
  - 'A Life of Compromise'
draft: true
---
EOF
    cat << EOF > "$content_dir"/"$dir_thu"/x-"$date_thu"-"$base_thu".md
---
title: 'Luke'
author: Joseph Louthan
type: post
publishDate: $date_thu
url: /$base_thu/$date_thu-$base_thu/
categories:
  - Devotions
tags:
  - 'Family Devotions: Luke'
draft: true
---
EOF
    cat << EOF > "$content_dir"/"$dir_fri"/x-"$date_fri"-"$base_fri".md
---
title: 'A Few Points for Friday'
author: Joseph Louthan
type: post
publishDate: $date_fri
url: /$base_fri/$date_fri-$base_fri/
categories:
  - Links
tags:
  - 'A Few Points for Friday'
draft: true
---
EOF
    cat << EOF > "$content_dir"/"$dir_tim"/x-"$date_fri"-"$base_tim".md
---
title: 'Thinking Through Ministry: 1 Timothy'
author: Joseph Louthan
type: post
publishDate: $date_fri
url: /$base_fri/$date_fri-$base_fri/
categories:
  - Ministry
tags:
  - 'Philosophy of Ministry'
draft: true
---
EOF
    cat << EOF > "$content_dir"/"$dir_sat"/x-"$date_sat"-"$base_sat".md
---
title: 'Sundry Saturdays'
author: Joseph Louthan
type: post
publishDate: $date_sat
url: /$base_sat/$date_sat-$base_sat/
categories:
  - Links
tags:
  - 'Sundry Saturdays'
draft: true
---
EOF
#     cat << EOF > "$content_dir"/x-"$date_mark"-"$base_mark".md
# ---
# title: 'xMark '
# author: Joseph Louthan
# type: post
# publishDate: $date_mark
# url: /$base_mark/$date_mark-$base_mark/
# categories:
#   - Commentary
# tags:
#   - 'Commentary: Mark'
# draft: true
# ---
# EOF

fi
